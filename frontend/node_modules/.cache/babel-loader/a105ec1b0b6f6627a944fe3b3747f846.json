{"ast":null,"code":"import _toConsumableArray from \"C:\\\\Users\\\\alexd\\\\ParkeMX\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"C:\\\\Users\\\\alexd\\\\ParkeMX\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\alexd\\\\ParkeMX\\\\frontend\\\\src\\\\components\\\\ListaDeParques.jsx\";\n\nimport React, { useState, useEffect } from 'react';\nimport axios from \"axios\";\nimport BarraNav from './BarraNav';\nimport carousel from './Carousel';\nimport \"../css/customStyles.css\";\nimport { Dropdown, Card, Row, Col, Carousel, Button, Container, InputGroup, FormControl } from 'react-bootstrap';\n\nvar reverse = function reverse(arr1) {\n  var aux = [];\n\n  for (var i = 0; i < arr1.length; i++) {\n    aux.unshift(arr1[i]);\n  }\n\n  return aux;\n};\n\nvar renderAbrir = function renderAbrir(horario) {\n  return /*#__PURE__*/React.createElement(Container, {\n    key: horario.id,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Card.Text, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 23,\n      columnNumber: 13\n    }\n  }, horario.horaAbrir, \" - \", horario.horaCerrar, \" - \", horario.dias));\n};\n\nvar renderCard = function renderCard(card) {\n  var url = \"http://localhost:4000/api/parques/img/\" + card.id;\n  return /*#__PURE__*/React.createElement(Col, {\n    key: card.id,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    style: {\n      width: '22rem',\n      height: '100%'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Card.Body, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Card.Title, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 21\n    }\n  }, card.nombre), /*#__PURE__*/React.createElement(Card.Img, {\n    src: url,\n    className: \"cardImage\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(Card.Text, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 21\n    }\n  }, card.descripcion), \"Direccion\", /*#__PURE__*/React.createElement(Card.Text, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 21\n    }\n  }, card.direccion), \"Horarios\", card.horario.map(renderAbrir)), /*#__PURE__*/React.createElement(Button, {\n    className: \"link\",\n    variant: \"primary\",\n    href: \"/parque/\" + card.id,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 17\n    }\n  }, \"Mas Informacion\")));\n};\n\nvar renderDropdown = function renderDropdown(activity) {\n  return /*#__PURE__*/React.createElement(Dropdown.Item, {\n    eventKey: activity.id,\n    key: activity.id,\n    href: \"#/action-1\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }\n  }, activity.nombre);\n};\n\nvar icon = \"caret-down-outline\";\nvar toggle = 0;\n\nfunction ListaDeParques() {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      parques = _useState2[0],\n      setParques = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      searchTerm = _useState4[0],\n      setSearch = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      activityButton = _useState6[0],\n      setActivityButton = _useState6[1];\n\n  var _useState7 = useState(0),\n      _useState8 = _slicedToArray(_useState7, 2),\n      searchActivity = _useState8[0],\n      setSearchActivity = _useState8[1]; //const [calcDistance, setCalcDistance] = useState(false);\n\n\n  var _useState9 = useState(0),\n      _useState10 = _slicedToArray(_useState9, 2),\n      latitud = _useState10[0],\n      setLatitud = _useState10[1];\n\n  var _useState11 = useState(0),\n      _useState12 = _slicedToArray(_useState11, 2),\n      longitud = _useState12[0],\n      setLongitud = _useState12[1]; //investigate reducer in react manual\n\n\n  useEffect(function () {\n    function getPosition(position) {\n      //const URL = 'https://maps.googleapis.com/maps/api/distancematrix/json?origins='+position.coords.latitude + ',' + position.coords.longitude + '&destinations=' + 20.53484996215969 + ',' + -100.3577293854862 + '&key=AIzaSyBa_nu7n2b5Gs_J2YPiSSCKnKD-ZsdD0YA';\n      setLatitud(position.coords.latitude);\n      setLongitud(position.coords.longitude);\n    }\n\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(getPosition);\n    } else {\n      console.log(\"geolocation not available\");\n    }\n\n    var getData = function getData() {\n      var promise1 = axios.get(\"http://localhost:4000/api/parques\");\n      var promise2 = axios.get(\"http://localhost:4000/api/parques/activity\");\n      Promise.all([promise1, promise2]).then(function (values) {\n        setParques(values[0].data);\n        setActivityButton(values[1].data);\n      }).catch(function (e) {\n        return console.log(e);\n      });\n    };\n\n    getData();\n  }, []);\n\n  var cardOrder = function cardOrder() {\n    if (toggle === 0) {\n      icon = \"caret-up-outline\";\n      toggle = 1;\n    } else {\n      icon = \"caret-down-outline\";\n      toggle = 0;\n    }\n\n    setParques(reverse(parques));\n  }; //Haversine algorithm\n\n\n  function distance(lat1, lon1, lat2, lon2) {\n    var p = 0.017453292519943295; // Math.PI / 180\n\n    var c = Math.cos;\n    var a = 0.5 - c((lat2 - lat1) * p) / 2 + c(lat1 * p) * c(lat2 * p) * (1 - c((lon2 - lon1) * p)) / 2;\n    return 12742 * Math.asin(Math.sqrt(a)); // 2 * R; R = 6371 km\n  }\n\n  function byDistance() {\n    parques.forEach(function (parque) {\n      return parque.superficieMarina = distance(latitud, longitud, parque.latitud, parque.longitud);\n    });\n    parques.sort(function (parque1, parque2) {\n      if (parque1.superficieMarina > parque2.superficieMarina) {\n        return -1;\n      }\n\n      if (parque1.superficieMarina < parque2.superficieMarina) {\n        return 1;\n      }\n\n      return 0;\n    }); //console.log(parques);\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(BarraNav, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Carousel, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 13\n    }\n  }, _toConsumableArray(parques).sort(function (a, b) {\n    //crean un nuevo arreglo y los 3 puntos copian los datos de parques al nuevo arreglo spread operator. tambien se puede copiar un arreglo\n    if (a.clicks > b.clicks) {\n      return -1;\n    }\n\n    if (a.clicks < b.clicks) {\n      return 1;\n    }\n\n    return 0;\n  }).slice(0, 3).map(carousel)), /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 13\n    }\n  }, \"Encuentra Parques filtrando por Actividad\"), /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"arrow\",\n    onClick: function onClick() {\n      return cardOrder();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"ion-icon\", {\n    name: icon,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 25\n    }\n  })))), /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"primary\",\n    onClick: byDistance,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 17\n    }\n  }, \"Sortear por el mas cerca a mi\")), /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(InputGroup, {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(FormControl, {\n    onChange: function onChange(event) {\n      setSearch(event.target.value);\n    },\n    placeholder: \"Busqueda\",\n    \"aria-label\": \"Recipient's username\",\n    \"aria-describedby\": \"basic-addon2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(InputGroup.Text, {\n    id: \"basic-addon2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"ion-icon\", {\n    name: \"search-outline\",\n    size: \"large\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 56\n    }\n  })))), /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Dropdown, {\n    className: \"drop\",\n    onSelect: function onSelect(eventKey, event) {\n      setSearchActivity(eventKey);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Dropdown.Toggle, {\n    variant: \"secondary\",\n    id: \"dropdown-basic\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 25\n    }\n  }, \"Actividades\"), /*#__PURE__*/React.createElement(Dropdown.Menu, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Dropdown.Item, {\n    eventKey: \"0\",\n    href: \"#/action-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 25\n    }\n  }, \"Todos\"), activityButton.map(renderDropdown)))))), /*#__PURE__*/React.createElement(Row, {\n    className: \"m-5 g-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 13\n    }\n  }, // eslint-disable-next-line\n  parques.filter(function (parque) {\n    var result = true;\n\n    if (searchTerm !== \"\") {\n      result = result && parque.nombre.toLowerCase().includes(searchTerm.toString().toLowerCase());\n    }\n\n    if (calcDistance !== false) {} // eslint-disable-next-line\n\n\n    if (searchActivity != 0) {\n      var index = parque.actividades.findIndex(function (activity) {\n        // eslint-disable-next-line\n        return activity.actividadId == searchActivity;\n      });\n      result = result && index !== -1;\n    }\n\n    return result;\n  }).map(renderCard)));\n}\n\nexport default ListaDeParques; //ver el hook de useContext\n//usar react-router-dom v6\n//investigar lo de los providers\n//no usar redux\n//atomic design","map":{"version":3,"sources":["C:/Users/alexd/ParkeMX/frontend/src/components/ListaDeParques.jsx"],"names":["React","useState","useEffect","axios","BarraNav","carousel","Dropdown","Card","Row","Col","Carousel","Button","Container","InputGroup","FormControl","reverse","arr1","aux","i","length","unshift","renderAbrir","horario","id","horaAbrir","horaCerrar","dias","renderCard","card","url","width","height","nombre","descripcion","direccion","map","renderDropdown","activity","icon","toggle","ListaDeParques","parques","setParques","searchTerm","setSearch","activityButton","setActivityButton","searchActivity","setSearchActivity","latitud","setLatitud","longitud","setLongitud","getPosition","position","coords","latitude","longitude","navigator","geolocation","getCurrentPosition","console","log","getData","promise1","get","promise2","Promise","all","then","values","data","catch","e","cardOrder","distance","lat1","lon1","lat2","lon2","p","c","Math","cos","a","asin","sqrt","byDistance","forEach","parque","superficieMarina","sort","parque1","parque2","b","clicks","slice","event","target","value","eventKey","filter","result","toLowerCase","includes","toString","calcDistance","index","actividades","findIndex","actividadId"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\r\nimport axios from \"axios\";\r\nimport BarraNav from './BarraNav';\r\nimport carousel from './Carousel';\r\nimport \"../css/customStyles.css\"\r\nimport { Dropdown, Card, Row, Col, Carousel, Button, Container, InputGroup, FormControl } from 'react-bootstrap';\r\n\r\n\r\nconst reverse = (arr1) => {\r\n\r\n    const aux = [];\r\n\r\n    for(let i = 0; i<arr1.length;i++){\r\n        aux.unshift(arr1[i]);\r\n    }\r\n\r\n    return aux;\r\n}\r\n\r\nconst renderAbrir = (horario) => {\r\n    return (\r\n        <Container key = {horario.id}>\r\n            <Card.Text>\r\n            {horario.horaAbrir} - {horario.horaCerrar} - {horario.dias}\r\n            </Card.Text>\r\n        </Container>\r\n    );\r\n}\r\n\r\nconst renderCard = (card) => {\r\n    const url = \"http://localhost:4000/api/parques/img/\"+card.id;\r\n\r\n    return(\r\n        <Col key = {card.id}>\r\n            <Card style={{ width: '22rem', height: '100%'}}>\r\n                <Card.Body>\r\n                    <Card.Title>{card.nombre}</Card.Title>\r\n                    <Card.Img src={url} className=\"cardImage\"/>\r\n                    <Card.Text>\r\n                    {card.descripcion}\r\n                    </Card.Text>\r\n                    Direccion\r\n                    <Card.Text>\r\n                    {card.direccion}\r\n                    </Card.Text>\r\n                    Horarios\r\n                    {card.horario.map(renderAbrir)}\r\n                </Card.Body>\r\n                <Button className=\"link\" variant=\"primary\" href={\"/parque/\"+card.id}>Mas Informacion</Button>\r\n            </Card>\r\n        </Col>\r\n    );\r\n}\r\n\r\nconst renderDropdown = (activity) => {\r\n\r\n    return(\r\n        <Dropdown.Item eventKey={activity.id} key={activity.id} href=\"#/action-1\">{activity.nombre}</Dropdown.Item>\r\n    );\r\n}\r\n\r\nlet icon = \"caret-down-outline\";\r\n\r\nlet toggle = 0;\r\n\r\nfunction ListaDeParques(){\r\n\r\n    const [parques, setParques] = useState([]);\r\n    const [searchTerm, setSearch] = useState(\"\");\r\n    const [activityButton, setActivityButton] = useState([]);\r\n    const [searchActivity, setSearchActivity] = useState(0);\r\n    //const [calcDistance, setCalcDistance] = useState(false);\r\n    const [latitud, setLatitud] = useState(0);\r\n    const [longitud, setLongitud] = useState(0);\r\n    //investigate reducer in react manual\r\n\r\n    useEffect(() => {\r\n\r\n        function getPosition(position){\r\n            //const URL = 'https://maps.googleapis.com/maps/api/distancematrix/json?origins='+position.coords.latitude + ',' + position.coords.longitude + '&destinations=' + 20.53484996215969 + ',' + -100.3577293854862 + '&key=AIzaSyBa_nu7n2b5Gs_J2YPiSSCKnKD-ZsdD0YA';\r\n    \r\n            setLatitud(position.coords.latitude);\r\n            setLongitud(position.coords.longitude);\r\n        }\r\n\r\n        if(navigator.geolocation){\r\n            navigator.geolocation.getCurrentPosition(getPosition)\r\n        }else{\r\n            console.log(\"geolocation not available\");\r\n        }\r\n\r\n        const getData = () => {\r\n            let promise1 = axios.get(\"http://localhost:4000/api/parques\");\r\n\r\n            let promise2 = axios.get(\"http://localhost:4000/api/parques/activity\");\r\n\r\n            Promise.all([promise1, promise2])\r\n            .then(values => {setParques(values[0].data); setActivityButton(values[1].data);})\r\n            .catch(e=>console.log(e))\r\n        }\r\n\r\n        getData();\r\n\r\n    }, []);\r\n\r\n    const cardOrder = () => {\r\n        if(toggle === 0){\r\n            icon = \"caret-up-outline\";\r\n            toggle = 1;\r\n        }else{\r\n            icon = \"caret-down-outline\";\r\n            toggle = 0;\r\n        }\r\n        setParques(reverse(parques));\r\n\r\n    }\r\n\r\n    //Haversine algorithm\r\n    function distance(lat1, lon1, lat2, lon2) {\r\n        var p = 0.017453292519943295;    // Math.PI / 180\r\n        var c = Math.cos;\r\n        var a = 0.5 - c((lat2 - lat1) * p)/2 + \r\n                c(lat1 * p) * c(lat2 * p) * \r\n                (1 - c((lon2 - lon1) * p))/2;\r\n      \r\n        return 12742 * Math.asin(Math.sqrt(a)); // 2 * R; R = 6371 km\r\n      }\r\n    function byDistance(){\r\n        parques.forEach(parque => parque.superficieMarina = distance(latitud, longitud, parque.latitud, parque.longitud));\r\n\r\n        parques.sort((parque1, parque2)=>{\r\n            if(parque1.superficieMarina > parque2.superficieMarina){\r\n                return -1;\r\n            }\r\n            if(parque1.superficieMarina < parque2.superficieMarina){\r\n                return 1;\r\n            }\r\n\r\n            return 0;\r\n        });\r\n        //console.log(parques);\r\n    }\r\n\r\n    return(\r\n        <div>\r\n            <BarraNav />\r\n\r\n            <Carousel>\r\n                {[...parques].sort((a, b)=>{//crean un nuevo arreglo y los 3 puntos copian los datos de parques al nuevo arreglo spread operator. tambien se puede copiar un arreglo\r\n                    if(a.clicks > b.clicks){\r\n                        return -1;\r\n                    }\r\n                    if(a.clicks < b.clicks){\r\n                        return 1;\r\n                    }\r\n\r\n                    return 0;\r\n                }).slice(0,3).map(carousel)}\r\n            </Carousel>\r\n\r\n            <h1>Encuentra Parques filtrando por Actividad</h1>\r\n\r\n            <Container>\r\n            <Row>\r\n                <Col>\r\n                <button type='button' className='arrow' onClick={() => cardOrder()}>\r\n                    <span>\r\n                        <ion-icon name={icon}></ion-icon>\r\n                    </span>\r\n                </button>\r\n                </Col>\r\n                <Col>\r\n                <Button variant=\"primary\" onClick={byDistance}>Sortear por el mas cerca a mi</Button>\r\n                </Col>\r\n                <Col>\r\n\r\n                <InputGroup className=\"mb-3\">\r\n                    <FormControl onChange={(event) => {setSearch(event.target.value)}}\r\n                    placeholder=\"Busqueda\"\r\n                    aria-label=\"Recipient's username\"\r\n                    aria-describedby=\"basic-addon2\"\r\n                    />\r\n                    <InputGroup.Text id=\"basic-addon2\"><ion-icon name=\"search-outline\" size=\"large\"></ion-icon></InputGroup.Text>\r\n                </InputGroup>\r\n\r\n                </Col>\r\n                <Col>\r\n                    <Dropdown className=\"drop\" onSelect={(eventKey, event) => {setSearchActivity(eventKey);}}>\r\n                        <Dropdown.Toggle variant=\"secondary\" id=\"dropdown-basic\">\r\n                            Actividades\r\n                        </Dropdown.Toggle>\r\n\r\n                        <Dropdown.Menu>\r\n                        <Dropdown.Item eventKey=\"0\" href=\"#/action-1\">Todos</Dropdown.Item>\r\n                            {activityButton.map(renderDropdown)}\r\n                        </Dropdown.Menu>\r\n                    </Dropdown>\r\n                </Col>\r\n            </Row>\r\n            </Container>\r\n\r\n            <Row className=\"m-5 g-4\">\r\n                {// eslint-disable-next-line\r\n                parques.filter((parque) => {\r\n\r\n                    let result = true;\r\n\r\n                    if(searchTerm !== \"\"){\r\n                        result = result && parque.nombre.toLowerCase().includes(searchTerm.toString().toLowerCase())\r\n                    }\r\n                    if(calcDistance !== false){\r\n                    }\r\n                    // eslint-disable-next-line\r\n                    if(searchActivity != 0){\r\n                        let index = parque.actividades.findIndex((activity) => {\r\n                            // eslint-disable-next-line\r\n                            return (activity.actividadId == searchActivity);\r\n                        });\r\n\r\n                        result = result && (index !== -1);\r\n                    }\r\n\r\n                    return result;\r\n\r\n                }).map(renderCard)}\r\n            </Row>\r\n\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ListaDeParques;\r\n\r\n//ver el hook de useContext\r\n//usar react-router-dom v6\r\n//investigar lo de los providers\r\n//no usar redux\r\n\r\n//atomic design\r\n"]},"metadata":{},"sourceType":"module"}